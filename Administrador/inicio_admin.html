<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CHUNCHES DEL DE LA PAGINA PARA QUE JALE EL CSS -->
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic"
        rel="stylesheet" type="text/css" />
    <!-- Third party plugin CSS-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"
        rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />


    <!-- *****************************CRUD******************-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">


    <!-- *******************************AQUÍ PONEMOS EL MODAL ESPERANDO EN DIOS QUE JALE XD******************************-->


    <!-- *************************************************************-->
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script type="text/javascript" src="papaparse.min.js"></script>
    <!-- *******************************AQUÍ PONEMOS LOS PANELES******************************-->
    <style>
        body {
            font-family: Arial;
        }

        /* Style the tab */
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
        }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }
    </style>

    <!-- *******************************AQUÍ PONEMOS EL MODAL ESPERANDO EN DIOS QUE JALE XD******************************-->
    <style>
        /* The Modal (background) */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 90px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: auto;
            padding: 0;
            border: 1px solid #888;
            width: 80%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            -webkit-animation-name: animatetop;
            -webkit-animation-duration: 0.4s;
            animation-name: animatetop;
            animation-duration: 0.4s
        }

        /* Add Animation */
        @-webkit-keyframes animatetop {
            from {
                top: -300px;
                opacity: 0
            }

            to {
                top: 0;
                opacity: 1
            }
        }

        @keyframes animatetop {
            from {
                top: -300px;
                opacity: 0
            }

            to {
                top: 0;
                opacity: 1
            }
        }

        /* The Close Button */
        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        /* The Close Button1 */
        .close1 {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close1:hover,
        .close1:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }


        /* The Close Button2 */
        .close2 {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close2:hover,
        .close2:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }


        /* The Close Button3 */
        .close3 {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close3:hover,
        .close3:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-header {
            padding: 2px 16px;
            background-color: #457de4;
            color: white;
        }

        .modal-body {
            padding: 2px 16px;
        }

        .modal-footer {
            padding: 2px 16px;
            background-color: #5cb85c;
            color: white;
        }
    </style>


</head>

<body>

    <!-- Navigation-- onload="Tabla()"-->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="#page-top" style="color:#62acf1">UBlog</a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto my-2 my-lg-0">
                    <!--  <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about"
                            style="color:#62acf1">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#services"
                            style="color:#62acf1">Services</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#portfolio"
                            style="color:#62acf1">Portfolio</a></li> -->

                    <li class="nav-item"><button type="button" class="btn btn-danger" onclick="BtnSalir()">
                            Cerrar Sesión</button></li>
                </ul>
            </div>
        </div>
    </nav>
    <br>
    <br>
    <br>
    <div class="tab">
        <button class="tablinks" onclick="PanelxD(event, 'Administrador')" id="v:">Administrador</button>
        <button class="tablinks" onclick="PanelxD(event, 'Usuarios'); TablaU()">Usuarios</button>
        <button class="tablinks" onclick="PanelxD(event, 'Publicaciones'); TablaP()">Publicaciones</button>
        
    </div>


    <div id="Administrador" class="tabcontent">
        <!-- Masthead-->
        <header class="masthead2">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-10 align-self-end">
                        <h1 class="text-uppercase text-white font-weight-bold">Crea y comparte</h1>
                        <hr class="divider my-4" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <p class="text-white-75 font-weight-light mb-5">Start Bootstrap can help you build better
                            websites using the Bootstrap framework! Just download a theme and start customizing, no
                            strings attached!</p>
                        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">Find Out More</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- About-->
        <section class="page-section bg-primary" id="about">
            <div class="container">
                <center>
                    <img src="../Administrador/imagenes/foto_aux.jpg" width="190" height="210">
                                       
                </center>
                <div class="row justify-content-center">

                    <div class="col-lg-8 text-center">
                        <h1 class="text-white mt-0">Administrador</h1>
                        <h2 class="text-white mt-0">Ing. Darwin Arevalo</h2>
                        <hr class="divider light my-4" />
                        <p class="text-white-50 mb-4">Start Bootstrap has everything you need to get your new website up
                            and running in no time! Choose one of our open source, free to download, and easy to use
                            themes! No strings attached!</p>
                        <a class="btn btn-light btn-xl js-scroll-trigger" href="#services">Get Started!</a>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <div id="Usuarios" class="tabcontent">
        <!-- Masthead-->
        <header class="masthead">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-10 align-self-end">
                        <h1 class="text-uppercase text-white font-weight-bold">Nuestros Usuarios son el motor que nos
                            impulsa</h1>
                        <hr class="divider my-4" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">

                        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#services">Ver Usuarios</a>
                        <div>
                            <br>
                            <img src="../pagina principal/images/logo_camara.png" width="170" />


                        </div>
                        <div>

                        </div>
                    </div>
                </div>
            </div>


        </header>
        <section class="page-section bg-primary" id="about">
            <div class="container">

                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <img src="../pagina principal/images/usuario.png" width="170" />
                        <br>
                        <br>
                        <h1 class="text-white mt-0">Administrar Usuario <i class="fas fa-laptop-medical mb-4"></i></h1>
                        <hr class="divider light my-4" />

                        <div>
                            <h4 class="text-white mt-0" align="left">Agregar Usuarios al Sistema</h4>
                            <input class="form-control" type="file" id="aceptoU" accept=".json">
                            <br>
                            <button onclick="Prueba()" type="button" class="btn btn-success" style="width: 50%;"> 
                                    Subir Archivo</button>
                        </div>
                        <br>
                        <div>
                            <h4 class="text-white mt-0" align="left">Generar PDF de Usuaios</h4>
                            <button onclick="PDF()" class="btn btn-warning" type="button" style="width: 50%;"><i
                                    class="far fa-file-pdf"></i> Generar PDF</button>
                        </div>
                        <div class="mt-5">


                        </div>


                    </div>
                </div>
            </div>
        </section>



        <section class="page-section" id="services">

            <div class="container">

                <h2 class="text-center mt-0">Usuarios Registrados en el sistema</h2>
                <br>
                <div>
                    <center>
                        <table class="table table-bordred table-striped" , id="tablexd" , style="width:100%">
                            <thead align="center">
                                <tr class="table-dark">
                                    <th> Nombre </th>
                                    <th>UserName</th>                                   
                                    <th> Correo </th>
                                    <th>Contraseña</th>                                    

                                </tr>
                            </thead>

                            <tbody id="detalles"></tbody>
                        </table>
                </div>

                </center>
                <hr class="divider my-4" />
                
            </div>
        </section>




        <!--**************************FLOTANTE*********************************************-->


        <div id="myModal1" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <div class="modal-header">
                    <span class="close1">&times;</span>
                    <h3 align="center">Usuarios</h3>
                </div>
                <div class="modal-body">
                    <div style="width: 50%; padding-left: 20px; float: left;">
                        <br>
                        <form>
                            <div class="mb-3">
                                <label for="emailu" class="form-label">Email</label>
                                <input type="text" class="form-control" id="EMAIL" placeholder="Email" disabled>
                            </div>
                            <div class="mb-3">
                                <label for="nameu" class="form-label">Nombre</label>
                                <input type="text" class="form-control" id="NAME" placeholder="Name" >
                            </div>
                            
                            <div class="mb-3">
                                <label for="usernameu" class="form-label">Username</label>
                                <input type="text" class="form-control" id="USERNAME" placeholder="Username">
                            </div>
                                                        
                            <div class="mb-3">
                                <label for="passwordu" class="form-label">Password</label>
                                <input type="password" class="form-control" id="PASSWORD" >
                            </div>
                            
                            <div class="mb-3">
                                <select name="cars" id="GENDER">
                                    <option value="S">Sexo</option>
                                    <option value="M">M</option>
                                    <option value="F">F</option>
                                </select>
                            </div>

                        </form>
                    </div>
                    <div style="width: 40%; padding-right: 25px; float: right;">
                        <br>


                        <center>
                            <img src="../pagina principal/images/logo_camara.png" width="240" height="240" />

                            <img src="../pagina principal/images/usuario.png" width="240" height="240" />
                            <h3>Usuario</h3>
                            <button onclick="BackU()" type="button" class="btn btn-primary"><i
                                    class="fas fa-arrow-circle-left"></i></button>
                            <button onclick="UsuarioEliminar()" type="button" class="btn btn-danger"><i
                                    class="fas fa-trash-alt"></i></button>
                            <button onclick="UsuarioActualizar()" type="button" class="btn btn-success"><i
                                    class="fas fa-edit"></i></button>


                        </center>

                    </div>
                </div>
                <div class="modal-footer">

                </div>
            </div>
        </div>
        <!--**************************FLOTANTE*********************************************-->
    </div>



    <!-- *************************************************************************************************************************-->

    <div id="Publicaciones" class="tabcontent">
        <header class="masthead1">
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-10 align-self-end">
                        <h1 class="text-uppercase text-white font-weight-bold" style="text-align: center;">
                            Agregale a cada publicacion tu sello personal.
                        </h1>
                        <hr class="divider my-4" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">

                        <img src="../pagina principal/images/logo_camara.png" width="180" />
                       
                    </div>

                </div>
            </div>
        </header>

        <section class="page-section bg-primary" id="about">
            <div class="container">

                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <img src="../pagina principal/images/icono publicacion.png" width="170" />
                        <br>
                        <br>
                        <h1 class="text-white mt-0">Administrar Publicacion <i class="fas fa-laptop-medical mb-4"></i></h1>
                        <hr class="divider light my-4" />

                        <div>
                            <h4 class="text-white mt-0" align="left">Agregar Publicaciones al sistema</h4>
                            <input class="form-control" type="file" id="aceptoP" accept=".json">
                            <br>
                            <button onclick="CargaP()" type="button" class="btn btn-success" style="width: 50%;"> <i
                                    class="fas fa-file-csv"></i> Subir Archivo</button>

                        </div>
                        <br>
                        <div>
                            <h4 class="text-white mt-0" align="left">Generar PDF de Publicaciones</h4>
                            <button onclick="PDFP()" class="btn btn-warning" type="button" style="width: 50%;"><i
                                    class="far fa-file-pdf"></i> Generar PDF</button>
                                <br>
                                <br>
                            <button type="button" class="btn btn-info" onclick="TopP()" style="width: 50%;">
                                Top 5 Publicaciones</button>

                        </div>
                        <div class="mt-5">


                        </div>


                    </div>
                </div>
            </div>
        </section>

        <section class="page-section" id="services">
            <div class="container">
                <h2 class="text-center mt-0">Lista Publicaciones</h2>
                <hr class="divider my-4" />
                <center>
                    <div>
                        <table class="table table-bordred table-striped" , id="tablaP" , style="width:100%">
                            <thead align="center">
                                <tr class="table-dark">
                                    <th> Type </th>                                    
                                    <th>Date</th>
                                    <th>Category</th>
                                    
                                </tr>
                            </thead>

                            <tbody id="tablaP"></tbody>
                        </table>

                    </div>
                </center>
                <hr class="divider my-4" />
                
            </div>
        </section>





        <div>



            <div id="myModal2" class="modal">

                <!-- Modal content -->
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="close2">&times;</span>
                        <h3>Publicacion</h3>
                    </div>
                    <div class="modal-body">
                        <div style="width: 50%; padding-left: 25px; float: left;">
                            <br>
                            <form>
                                <div class="mb-3">
                                    <label for="Type" class="form-label">Type</label>
                                    <input type="text" class="form-control" id="TYPE" placeholder="TIPO"
                                        disabled>
                                </div>
                                <div class="mb-3">
                                    <label for="Url" class="form-label">Url</label>
                                    <input type="text" class="form-control" id="URL" placeholder="URL" required>
                                </div>
                                                                
                                <div class="mb-3">
                                    <label for="Date" class="form-label">Date</label>
                                    <input type="text" placeholder="día/mes/año" class="form-control" id="DATE">

                                </div>
                                
                                <div class="mb-3">
                                    <label for="Category" class="form-label">Category</label>
                                    <input type="text" class="form-control" id="CATEGORY" placeholder="CATEGORY">
                                </div>
                                

                            </form>
                        </div>
                        <div style="width: 40%; padding-right: 30px; float: right;">
                            <br>
                            <center>
                                <img src="../pagina principal/images/logo_camara.png" width="240" height="240" />

                                <img src="../pagina principal/images/icono publicacion.png" width="240" height="240" />
                                <h3>Publicacion</h3>
                                <button onclick="BackP()" type="button" class="btn btn-primary"><i
                                        class="fas fa-arrow-circle-left"></i></button>
                                <button onclick="PublicacionEliminar()" type="button" class="btn btn-danger"><i
                                        class="fas fa-trash-alt"></i></button>
                                <button onclick="PublicacionActualizar()" type="button" class="btn btn-success"><i
                                        class="fas fa-edit"></i></button>


                            </center>

                        </div>
                    </div>
                    <div class="modal-footer">

                    </div>
                </div>
            </div>

        </div>
    </div>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="papaparse.min.js"></script>




    <script src="libs/jspdf.umd.js"></script>
    <script src="dist/jspdf.plugin.autotable.js"></script>

    <script>



        function PanelxD(evt, tipo) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tipo).style.display = "block";
            evt.currentTarget.className += " active";
        }
        document.getElementById("v:").click();

        //**************************USUARIOS****************************************************
        function Prueba() {
            var cont = 0

            JSON.parse(document.getElementById('aceptoU').files[0], {
                download: true,
                header: false,
                complete: function (datos) {
                    for (i = 1; i < datos.data.length; i++) {
                        cont++
                        var objeto1 = datos.data[i]

                        var objeto = {
                            'name': objeto1[0],
                            'gender': objeto1[1],
                            'username': objeto1[2],
                            'email': objeto1[3],
                            'password': objeto1[4]

                        }

                        console.log(objeto)


                        fetch('http://localhost:5000/crearusuario', {
                            method: 'POST',
                            body: JSON.stringify(objeto),
                            headers: {
                                'Content-Type': 'application/json',
                                'Access-Control-Allow-Origin': '*',
                            }
                        })

                            .then(res => res.json())
                            .catch(err => {
                                console.error('Error:', err)
                                alert("Ocurrio un error, ver la consola")
                            })

                            .then(response => {
                                console.log(response);
                            })
                    }
                    alert("Se agregaron " + cont + " Usuarios al Sistema")
                    Tabla()
                }
            });
        }

        function TablaU() {

            console.log("WWW")
            var tabla = document.querySelector('#detalles')
            var cadena = ''
            fetch('http://localhost:5000/obtenerusuarios', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*',
                }
            })
                .then(res => res.json())
                .catch(err => {
                    console.error('Error:', err)
                    alert("Ocurrio un error, ver la consola")
                })
                .then(response => {
                    //   console.log(response);
                    response.forEach(element => {
                        
                            cadena += `<tr class="table-success", align="center">
                        <td> ${element.name} </td>
                        <td> ${element.username} </td>
                        <td> ${element.email} </td>
                        <td>  ${element.password} </td>
                        
                        <td>    
                            <button value=${element.email} onclick="verusuario(this)" type="button" class="btn btn-primary"><i class="far fa-eye"></i></i></button>                         
                            
              </tr>`
                        
                    });
                    tabla.innerHTML = cadena
                })
        }

        function PDF() {
            var doc = new jspdf.jsPDF()
            doc.autoTable({ html: '#tablexd', theme: 'grid' })
            doc.save('ListaUsuarios.pdf')
        }


        //******************************PUBLICACIONES****************************************************
        function TablaP() {

            console.log("WWW")
            var tabla = document.querySelector('#tablaP')

            var cadena = ''


            fetch('http://localhost:5000/obtenerpublicaciones', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*',
                }
            })
                .then(res => res.json())
                .catch(err => {
                    console.error('Error:', err)
                    alert("Ocurrio un error, ver la consola")
                })
                .then(response => {
                    //   console.log(response);

                    response.forEach(element => {
                        
             cadena += `<tr class="table-success", align="center">
            <td> ${element.type} </td>
            <td> ${element.date} </td>
            <td> ${element.category} </td>
            <td> 
                <button  value=${element.url} onclick="verpublicacion(this)" type="button" class="btn btn-primary"><i class="far fa-eye"></i></button>
                
                
            </tr>`
                        
                    });
                    tabla.innerHTML = cadena
                })

        }



        function CargaP() {
            var cont = 0

            JSON.parse(document.getElementById('aceptoP').files[0], {
                download: true,
                header: false,
                complete: function (datos) {
                    for (i = 1; i < datos.data.length; i++) {
                        cont++
                        var objeto1 = datos.data[i]

                        var objeto = {
                            'name': objeto1[0],
                            'gender': objeto1[1],
                            'username': objeto1[2],
                            'email': objeto1[3],
                            'password': objeto1[4],
                            
                        }

                        console.log(objeto)


                        fetch('http://localhost:5000/crearpublicacion', {
                            method: 'POST',
                            body: JSON.stringify(objeto),
                            headers: {
                                'Content-Type': 'application/json',
                                'Access-Control-Allow-Origin': '*',
                            }
                        })

                            .then(res => res.json())
                            .catch(err => {
                                console.error('Error:', err)
                                alert("Ocurrio un error, ver la consola")
                            })

                            .then(response => {
                                console.log(response);

                            })


                    }

                    alert("Se agregaron " + cont + " Publicaciones al Sistema")
                    TablaP()

                }
            });

        }

        function PDFP() {
            var doc = new jspdf.jsPDF()
            doc.autoTable({ html: '#tablaP', theme: 'grid' })
            doc.save('ListaPublicaciones.pdf')
        }
       
    </script>

    <script>
        var modal = document.getElementById("myModal");

        var span = document.getElementsByClassName("close")[0];

        span.onclick = function () {
            modal.style.display = "none";
        }

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
            if (event.target == modal1) {
                modal1.style.display = "none";
            }
            if (event.target == modal2) {
                modal2.style.display = "none";
            }
            if (event.target == modal3) {
                modal3.style.display = "none";
            }
        }
        var modal1 = document.getElementById("myModal1");//usuarios
        var span1 = document.getElementsByClassName("close1")[0];

        span1.onclick = function () {
            modal1.style.display = "none";
        }

        var modal2 = document.getElementById("myModal2");//publicaciones
        var span2 = document.getElementsByClassName("close2")[0];

        span2.onclick = function () {
            modal2.style.display = "none";
        }

       
        //************************************
        function verusuario(boton) {
            modal1.style.display = "block";
            var email = boton.value
            console.log(email)
            fetch(`http://localhost:5000/obtenerusuario/${email}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*',
                }
            })
                .then(res => res.json())
                .catch(err => {
                    console.error('Error:', err)
                    alert("Ocurrio un error, ver la consola")
                })
                .then(response => {
                    document.querySelector('#NAME').value = response.name
                    document.querySelector('#USERNAME').value = response.username
                    document.querySelector('#EMAIL').value = response.email
                    document.querySelector('#PASSWORD').value = response.password
                    
                    if (response.gender == "M") {
                        document.querySelector('#GENDER').value = "M"
                    } else {
                        document.querySelector('#GENDER').value = "F"
                    }
                })
        }

        function verpublicacion(boton) {
            modal2.style.display = "block";
            var url = boton.value
            console.log(url)
            fetch(`http://localhost:5000/obtenerpublicacion/${url}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*',
                }
            })
                .then(res => res.json())
                .catch(err => {
                    console.error('Error:', err)
                    alert("Ocurrio un error, ver la consola")
                })
                .then(response => {
                    document.querySelector('#TYPE').value = response.type
                    document.querySelector('#URL').value = response.url
                    document.querySelector('#DATE').value = response.date
                    document.querySelector('#CATEGORY').value = response.category

                })
        }
        
        function UsuarioEliminar() {
            var nombre = document.querySelector('#NAME').value
            var usernombre = document.querySelector('#USERNAME').value
            var email = document.querySelector('#EMAIL').value
            var confirmar = confirm("¿Está seguro de eliminar el usuario " + usernombre +  " del Sistema")
            if (confirmar == true) {

                fetch(`http://localhost:5000/eliminarusuario/${usernombre}/${email}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Origin': '*',
                    }
                })
                    .then(res => res.json())
                    .catch(err => {
                        console.error('Error:', err)
                        alert("Ocurrio un error, ver la consola")
                    })
                    .then(response => {
                        modal1.style.display = "none";

                    })
                TablaU()
            }
        }


        function PublicacionEliminar() {
            var urlx= document.querySelector('#URL')
            var confirmar = confirm("¿Está seguro de eliminar la publicacion del Sistema")
            if (confirmar == true) {

                fetch(`https://backend202010025.herokuapp.com/eliminarpublicacion/${urlx}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Origin': '*',
                    }
                })
                    .then(res => res.json())
                    .catch(err => {
                        console.error('Error:', err)
                        alert("Ocurrio un error, ver la consola")
                    })
                    .then(response => {
                        modal2.style.display = "none";

                    })
                TablaP()
            }
        }

        function UsuarioActualizar() {
            var nombre = document.querySelector('#NAME').value
            var usernombre = document.querySelector('#USERNAME').value
            var email = document.querySelector('#EMAIL').value
            var confirmar = confirm("¿Está seguro de modificar los datos del usuario?")
            if (confirmar == true) {


                var passwordx = document.querySelector('#PASSWORD').value
                var sexo = document.querySelector('#Gender').value
                var objeto = {
                    'name': nombre,
                    'gender': sexo,
                    'username': usernombre,
                    'email': email,
                    'password': passwordx,
                    
                }
                fetch(`https://backend202010025.herokuapp.com/Pacientes/${email}`, {
                    method: 'PUT',
                    body: JSON.stringify(objeto),
                    headers: {
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Origin': '*',
                    }
                })
                    .then(res => res.json())
                    .catch(err => {
                        console.error('Error:', err)
                        alert("Ocurrio un error, ver la consola")
                    })
                    .then(response => {
                        modal1.style.display = "none";
                    })
                Tabla()
            }
        }

        function PublicacionActualizar() {
            var url=document.querySelector("#URL")
            var confirmar = confirm("¿Está seguro de modificar los datos de la publicacion?")
            if (confirmar == true) {


                var type = document.querySelector('#TYPE').value
                var date = document.querySelector('#DATE').value
                var category = document.querySelector('#CATEGORY').value
                var objeto = {
                    'type': type,
                    'url': url,
                    'date': date,
                    'category': category,


                }
                fetch(`http://localhost:5000/Pacientes/${url}`, {
                    method: 'PUT',
                    body: JSON.stringify(objeto),
                    headers: {
                        'Content-Type': 'application/json',
                        'Access-Control-Allow-Origin': '*',
                    }
                })
                    .then(res => res.json())
                    .catch(err => {
                        console.error('Error:', err)
                        alert("Ocurrio un error, ver la consola")
                    })
                    .then(response => {
                        modal2.style.display = "none";
                    })
                TablaP()
            }
        }



        function BackU() {
            modal1.style.display = "none";
        }

        function BackP() {
            modal2.style.display = "none";
        }

        
        //-----------------------------------------------------------------

        function BtnSalir() {
            location.href = "../login/login.html"
            
        }

    </script>
<!--***************************************************************************************-->
    <!-- Footer-->

    <footer class="bg-light py-5">
        <div class="container">
            <div class="small text-center text-muted">Copyright © 2020 - Start Bootstrap</div>
        </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>

</body>

</html>